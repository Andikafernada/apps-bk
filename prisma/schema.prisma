// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id         String      @id @default(cuid())
  name       String
  email      String      @unique
  password   String
  role       String
  avatarId   String?
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  cases      Case[]      @relation("CounselorToCase")
  treatments Treatment[] @relation("CounselorToTreatment")
}

model Student {
  id           String   @id @default(cuid())
  nis          String   @unique
  name         String
  class        String
  major        String
  jenjang      String
  tahunAjaran  String
  jenisKelamin String
  avatarId     String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  cases        Case[]
}

model Case {
  id          String     @id @default(cuid())
  student     Student    @relation(fields: [studentId], references: [id])
  studentId   String
  counselor   User       @relation("CounselorToCase", fields: [counselorId], references: [id])
  counselorId String
  kode_kasus  String
  anamnesa    String     @db.Text
  status      String
  lastMeeting DateTime
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  treatments  Treatment[]
}

model Treatment {
  id                String   @id @default(cuid())
  case              Case     @relation(fields: [caseId], references: [id])
  caseId            String
  counselor         User     @relation("CounselorToTreatment", fields: [counselorId], references: [id])
  counselorId       String
  tanggal_pertemuan DateTime
  description       String   @db.Text
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}
